{"version":3,"sources":["../src/ReactFifteenFourAdapter.js"],"names":["compositeTypeToNodeType","type","Error","childrenFromInst","inst","el","_renderedChildren","props","children","nodeType","_compositeType","instanceToTree","_currentElement","key","ref","instance","_instance","_hostNode","rendered","map","_renderedComponent","eventOptions","animation","ReactFifteenFourAdapter","lifecycles","options","supportPrevContextArgumentOfComponentDidUpdate","legacyContextMode","componentDidUpdate","prevContext","getChildContext","calledByRenderer","domNode","attachTo","global","document","createElement","adapter","render","context","callback","wrapperProps","Component","wrappingComponentProps","refProp","ReactWrapperComponent","wrappedEl","React","ReactDOM","setChildProps","unmount","unmountComponentAtNode","getNode","isCustomComponent","_reactInternalInstance","simulateEvent","node","event","mock","mappedEvent","eventFn","TestUtils","Simulate","TypeError","findDOMNode","batchedUpdates","fn","unstable_batchedUpdates","getWrappingComponentRenderer","toTree","getMountWrapperInstance","renderer","createRenderer","isDOM","cachedNode","output","getRenderOutput","args","handler","contextTypes","childContextTypes","ContextWrapper","ReactDOMServer","renderToStaticMarkup","mode","EnzymeAdapter","MODES","MOUNT","createMountRenderer","SHALLOW","createShallowRenderer","STRING","createStringRenderer","element","object","component","invoke","call","undefined","RootFinder","module","exports"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport ReactDOMServer from 'react-dom/server';\n// eslint-disable-next-line import/no-unresolved, import/extensions\nimport TestUtils from 'react-addons-test-utils';\nimport values from 'object.values';\nimport { isElement, isValidElementType } from 'react-is';\nimport { EnzymeAdapter } from 'enzyme';\nimport {\n  displayNameOfNode,\n  elementToTree,\n  mapNativeEventNames,\n  propFromEvent,\n  withSetStateAllowed,\n  assertDomAvailable,\n  createRenderWrapper,\n  createMountWrapper,\n  propsWithKeysAndRef,\n  ensureKeyOrUndefined,\n  wrap,\n  RootFinder,\n  getNodeFromRootFinder,\n  wrapWithWrappingComponent,\n  getWrappingComponentMountRenderer,\n} from 'enzyme-adapter-utils';\nimport ifReact from 'enzyme-adapter-react-helper/build/ifReact';\n\nfunction compositeTypeToNodeType(type) {\n  switch (type) {\n    case 0:\n    case 1: return 'class';\n    case 2: return 'function';\n    default:\n      throw new Error(`Enzyme Internal Error: unknown composite type ${type}`);\n  }\n}\n\nfunction childrenFromInst(inst, el) {\n  if (inst._renderedChildren) {\n    return values(inst._renderedChildren);\n  }\n  if (el.props) {\n    return values({ '.0': el.props.children });\n  }\n  return [];\n}\n\nfunction nodeType(inst) {\n  if (inst._compositeType != null) {\n    return compositeTypeToNodeType(inst._compositeType);\n  }\n  return 'host';\n}\n\nfunction instanceToTree(inst) {\n  if (!inst || typeof inst !== 'object') {\n    return inst;\n  }\n  const el = inst._currentElement;\n  if (el == null || el === false) {\n    return null;\n  }\n  if (typeof el !== 'object') {\n    return el;\n  }\n  if (inst._renderedChildren) {\n    return {\n      nodeType: nodeType(inst),\n      type: el.type,\n      props: el.props,\n      key: ensureKeyOrUndefined(el.key),\n      ref: el.ref,\n      instance: inst._instance || inst._hostNode || null,\n      rendered: childrenFromInst(inst, el).map(instanceToTree),\n    };\n  }\n  if (inst._hostNode) {\n    return {\n      nodeType: nodeType(inst),\n      type: el.type,\n      props: el.props,\n      key: ensureKeyOrUndefined(el.key),\n      ref: el.ref,\n      instance: inst._instance || inst._hostNode || null,\n      rendered: childrenFromInst(inst, el).map(instanceToTree),\n    };\n  }\n  if (inst._renderedComponent) {\n    return {\n      nodeType: nodeType(inst),\n      type: el.type,\n      props: el.props,\n      key: ensureKeyOrUndefined(el.key),\n      ref: el.ref,\n      instance: inst._instance || inst._hostNode || null,\n      rendered: instanceToTree(inst._renderedComponent),\n    };\n  }\n  return {\n    nodeType: nodeType(inst),\n    type: el.type,\n    props: el.props,\n    key: ensureKeyOrUndefined(el.key),\n    ref: el.ref,\n    instance: inst._instance || null,\n    rendered: childrenFromInst(inst, el).map(instanceToTree),\n  };\n}\n\nconst eventOptions = { animation: true };\n\nclass ReactFifteenFourAdapter extends EnzymeAdapter {\n  constructor() {\n    super();\n\n    const { lifecycles } = this.options;\n    this.options = {\n      ...this.options,\n      supportPrevContextArgumentOfComponentDidUpdate: true, // TODO: remove, semver-major\n      legacyContextMode: 'parent',\n      lifecycles: {\n        ...lifecycles,\n        componentDidUpdate: {\n          prevContext: true,\n        },\n        getChildContext: {\n          calledByRenderer: true,\n        },\n      },\n    };\n  }\n\n  createMountRenderer(options) {\n    assertDomAvailable('mount');\n    const domNode = options.attachTo || global.document.createElement('div');\n    let instance = null;\n    const adapter = this;\n    return {\n      render(el, context, callback) {\n        if (instance === null) {\n          const { type, props, ref } = el;\n          const wrapperProps = {\n            Component: type,\n            wrappingComponentProps: options.wrappingComponentProps,\n            props,\n            context,\n            ...(ref && { refProp: ref }),\n          };\n          const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\n          const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\n          instance = ReactDOM.render(wrappedEl, domNode);\n          if (typeof callback === 'function') {\n            callback();\n          }\n        } else {\n          instance.setChildProps(el.props, context, callback);\n        }\n      },\n      unmount() {\n        ReactDOM.unmountComponentAtNode(domNode);\n        instance = null;\n      },\n      getNode() {\n        if (!instance) {\n          return null;\n        }\n        return getNodeFromRootFinder(\n          adapter.isCustomComponent,\n          instanceToTree(instance._reactInternalInstance),\n          options,\n        );\n      },\n      simulateEvent(node, event, mock) {\n        const mappedEvent = mapNativeEventNames(event, eventOptions);\n        const eventFn = TestUtils.Simulate[mappedEvent];\n        if (!eventFn) {\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\n        }\n        // eslint-disable-next-line react/no-find-dom-node\n        eventFn(ReactDOM.findDOMNode(node.instance), mock);\n      },\n      batchedUpdates(fn) {\n        return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      getWrappingComponentRenderer() {\n        return {\n          ...this,\n          ...getWrappingComponentMountRenderer({\n            toTree: (inst) => instanceToTree(inst._reactInternalInstance),\n            getMountWrapperInstance: () => instance,\n          }),\n        };\n      },\n    };\n  }\n\n  createShallowRenderer(/* options */) {\n    const renderer = TestUtils.createRenderer();\n    let isDOM = false;\n    let cachedNode = null;\n    return {\n      render(el, context) {\n        cachedNode = el;\n        /* eslint consistent-return: 0 */\n        if (typeof el.type === 'string') {\n          isDOM = true;\n        } else {\n          isDOM = false;\n          return withSetStateAllowed(() => renderer.render(el, context));\n        }\n      },\n      unmount() {\n        renderer.unmount();\n      },\n      getNode() {\n        if (isDOM) {\n          return elementToTree(cachedNode);\n        }\n        const output = renderer.getRenderOutput();\n        return {\n          nodeType: compositeTypeToNodeType(renderer._instance._compositeType),\n          type: cachedNode.type,\n          props: cachedNode.props,\n          key: ensureKeyOrUndefined(cachedNode.key),\n          ref: cachedNode.ref,\n          instance: renderer._instance._instance,\n          rendered: elementToTree(output),\n        };\n      },\n      simulateEvent(node, event, ...args) {\n        const handler = node.props[propFromEvent(event, eventOptions)];\n        if (handler) {\n          withSetStateAllowed(() => {\n            // TODO(lmr): create/use synthetic events\n            // TODO(lmr): emulate React's event propagation\n            ReactDOM.unstable_batchedUpdates(() => {\n              handler(...args);\n            });\n          });\n        }\n      },\n      batchedUpdates(fn) {\n        return withSetStateAllowed(() => ReactDOM.unstable_batchedUpdates(fn));\n      },\n    };\n  }\n\n  createStringRenderer(options) {\n    return {\n      render(el, context) {\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n          const childContextTypes = {\n            ...(el.type.contextTypes || {}),\n            ...options.childContextTypes,\n          };\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\n        }\n        return ReactDOMServer.renderToStaticMarkup(el);\n      },\n    };\n  }\n\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  createRenderer(options) {\n    switch (options.mode) {\n      case EnzymeAdapter.MODES.MOUNT: return this.createMountRenderer(options);\n      case EnzymeAdapter.MODES.SHALLOW: return this.createShallowRenderer(options);\n      case EnzymeAdapter.MODES.STRING: return this.createStringRenderer(options);\n      default:\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\n    }\n  }\n\n  wrap(element) {\n    return wrap(element);\n  }\n\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n  // be pretty straightforward for people to implement.\n  // eslint-disable-next-line class-methods-use-this, no-unused-vars\n  nodeToElement(node) {\n    if (!node || typeof node !== 'object') return null;\n    return React.createElement(node.type, propsWithKeysAndRef(node));\n  }\n\n  elementToNode(element) {\n    return elementToTree(element);\n  }\n\n  nodeToHostNode(node) {\n    return ReactDOM.findDOMNode(node.instance);\n  }\n\n  displayNameOfNode(node) {\n    return displayNameOfNode(node);\n  }\n\n  isValidElement(element) {\n    return isElement(element);\n  }\n\n  isValidElementType(object) {\n    return isValidElementType(object);\n  }\n\n  isCustomComponent(component) {\n    return typeof component === 'function';\n  }\n\n  createElement(...args) {\n    return React.createElement(...args);\n  }\n\n  invokeSetStateCallback(instance, callback) {\n    // React in >= 15.4, and < 16 pass undefined to a setState callback\n    const invoke = ifReact(\n      '^15.4',\n      () => { callback.call(instance, undefined); },\n      () => { super.invokeSetStateCallback(instance, callback); },\n    );\n    invoke();\n  }\n\n  wrapWithWrappingComponent(node, options) {\n    return {\n      RootFinder,\n      node: wrapWithWrappingComponent(React.createElement, node, options),\n    };\n  }\n}\n\nmodule.exports = ReactFifteenFourAdapter;\n"],"file":"ReactFifteenFourAdapter.js"}